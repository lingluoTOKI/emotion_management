# 🚀 情绪管理系统 - 快速启动指南

## 🎯 三种启动方式

### 🥇 零环境Docker部署（推荐新手）

#### 📋 前置要求
只需要安装Docker Desktop：
- **Windows**: [Docker Desktop for Windows](https://desktop.docker.com/win/stable/Docker%20Desktop%20Installer.exe)
- **macOS**: [Docker Desktop for Mac](https://desktop.docker.com/mac/stable/Docker.dmg)
- **Linux**: `curl -fsSL https://get.docker.com -o get-docker.sh && sh get-docker.sh`

#### 🚀 启动方式

##### Windows用户（3种选择）
```bash
# 方式1：便携版启动（自动检查并安装Docker）
双击运行：便携版启动.bat

# 方式2：标准一键启动
双击运行：一键启动.bat

# 方式3：命令行启动
git clone <repository-url>
cd emotion_management
docker-compose up -d
```

##### Linux/macOS用户
```bash
# 克隆项目
git clone <repository-url>
cd emotion_management

# 方式1：脚本启动
chmod +x 一键启动.sh
./一键启动.sh

# 方式2：命令行启动
docker-compose up -d
```

#### 🌐 访问地址（Docker部署）
- **前端应用**: http://localhost:3001
- **后端API**: http://localhost:8000
- **API文档**: http://localhost:8000/docs
- **数据库**: localhost:3307

#### 🛠️ 管理命令
```bash
# 查看状态
docker-compose ps

# 查看日志
docker-compose logs -f

# 停止系统
docker-compose down

# 重启系统
docker-compose restart

# 系统状态检查（Windows）
双击运行：系统状态检查.bat
```

---

### 🥈 本地开发模式（推荐开发者）

#### 📋 前置要求
- Python 3.10+
- Node.js 18+
- MySQL 8.0+

#### 🚀 启动步骤

##### 1. 启动数据库
确保MySQL服务运行在端口3306

##### 2. 启动后端服务
```bash
cd backend

# 激活虚拟环境
.\venv\Scripts\activate  # Windows
source venv/bin/activate  # Linux/macOS

# 设置环境变量
set DATABASE_URL=mysql://root:password@localhost:3306/emotion_management  # Windows
export DATABASE_URL=mysql://root:password@localhost:3306/emotion_management  # Linux/macOS

# 启动服务
python -m uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

##### 3. 启动前端服务
```bash
cd frontend

# 安装依赖（首次运行）
npm install

# 启动开发服务器
npm run dev
```

#### 🌐 访问地址（本地开发）
- **前端应用**: http://localhost:3000
- **后端API**: http://localhost:8000
- **API文档**: http://localhost:8000/docs
- **数据库**: localhost:3306

#### 🛠️ 开发优势
- ✅ 热重载支持
- ✅ 实时代码更新
- ✅ 详细错误信息
- ✅ 快速启动（~30秒）
- ✅ 本地调试友好

---

### 🥉 生产环境部署

#### 🌐 云平台一键部署
我们提供了多个云平台的一键部署方案：

##### Heroku
[![Deploy to Heroku](https://www.herokucdn.com/deploy/button.svg)](https://heroku.com/deploy)

##### Railway
[![Deploy on Railway](https://railway.app/button.svg)](https://railway.app/template/your-template)

##### Vercel + PlanetScale
[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/your-repo/emotion_management)

#### 🐳 生产Docker部署
```bash
# 克隆项目
git clone <repository-url>
cd emotion_management

# 生产环境构建
docker-compose -f docker-compose.prod.yml up -d --build

# 配置反向代理（Nginx）
sudo apt install nginx
sudo cp nginx.conf /etc/nginx/sites-available/emotion-management
sudo ln -s /etc/nginx/sites-available/emotion-management /etc/nginx/sites-enabled/
sudo systemctl reload nginx
```

---

## 📊 启动成功验证

### ✅ 健康检查
```bash
# 后端健康检查
curl http://localhost:8000/health
# 预期返回：{"status":"healthy","service":"emotion_management"}

# 前端页面检查
curl -I http://localhost:3001  # Docker
curl -I http://localhost:3000  # 本地开发
# 预期返回：HTTP/1.1 200 OK
```

### 🔍 容器状态检查（Docker）
```bash
docker-compose ps
# 预期输出：
# emotion_backend    Up (healthy)
# emotion_frontend   Up
# emotion_mysql      Up (healthy)
```

---

## 👥 测试账号

| 角色 | 用户名 | 密码 | 权限 |
|------|--------|------|------|
| 学生 | student1 | 123456 | 心理评估、AI聊天、咨询预约 |
| 咨询师 | counselor1 | 123456 | 查看学生、咨询管理、报告生成 |
| 管理员 | admin1 | 123456 | 系统管理、用户管理、数据分析 |

---

## 🐛 常见问题

### Docker部署问题
1. **端口占用**: 修改docker-compose.yml中的端口映射
2. **内存不足**: 确保Docker Desktop分配至少2GB内存
3. **构建失败**: 清理Docker缓存 `docker system prune -f`

### 本地开发问题
1. **Python环境**: 确保使用Python 3.10+
2. **Node.js版本**: 确保使用Node.js 18+
3. **数据库连接**: 检查MySQL服务状态和连接参数

### 通用问题
1. **防火墙**: 确保端口3000、8000、3306/3307未被阻塞
2. **权限问题**: Windows用户以管理员身份运行
3. **网络问题**: 检查Docker网络配置

---

## 🚀 推荐流程

### 🎯 体验用户
1. 安装Docker Desktop
2. 双击运行 `便携版启动.bat`
3. 访问 http://localhost:3001
4. 使用测试账号登录体验

### 👨‍💻 开发者
1. 克隆项目到本地
2. 启动本地开发环境
3. 修改代码并测试
4. 使用Docker验证部署

### 🏢 生产部署
1. 配置生产环境变量
2. 使用Docker Compose生产配置
3. 配置Nginx反向代理
4. 设置SSL证书和域名

**🎉 选择适合你的方式，开始体验情绪管理系统！**